#include <cassert>
#include <memory>

/////////////////////////////////////////////////

int main()
{
    auto x = std::make_shared < int > (1);

//  ---------------------------------------------

	std::weak_ptr < int > y = x;

//  ---------------------------------------------

	assert(x.use_count() == 1 && *y.lock() == 1);

//  ---------------------------------------------

	x.reset();

//  ---------------------------------------------
		
	assert(x.use_count() == 0 && y.expired());
}
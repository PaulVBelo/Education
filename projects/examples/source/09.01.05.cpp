#include <cassert>
#include <memory>

/////////////////////////////////////////////////////////

int main()
{
    auto ptr_1 = std::make_shared < int > (1);

//  -----------------------------------------------------

	std::weak_ptr < int > ptr_2 = ptr_1;

//  -----------------------------------------------------

	assert(ptr_1.use_count() == 1 && *ptr_2.lock() == 1);

//  -----------------------------------------------------

	ptr_1.reset();

//  -----------------------------------------------------
		
	assert(ptr_1.use_count() == 0 && ptr_2.expired());
}